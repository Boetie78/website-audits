<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Initialize L&G Tools Data</title>
    <script src="customer-audit-data-manager.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-4xl mx-auto bg-white rounded-lg shadow p-6">
        <h1 class="text-2xl font-bold mb-4">Initialize L&G Tools Audit Data</h1>
        <div id="status" class="space-y-2"></div>
        <button onclick="initializeData()" class="mt-4 bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700">
            Initialize L&G Tools Data
        </button>
        <button onclick="viewData()" class="mt-4 ml-2 bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700">
            View Current Data
        </button>
    </div>
    
    <script>
        function log(message, type = 'info') {
            const status = document.getElementById('status');
            const div = document.createElement('div');
            div.className = type === 'success' ? 'text-green-600' : type === 'error' ? 'text-red-600' : 'text-blue-600';
            div.textContent = message;
            status.appendChild(div);
        }
        
        function initializeData() {
            try {
                // Get L&G Tools customer
                const customers = JSON.parse(localStorage.getItem('website_audit_customers') || '[]');
                const lgTools = customers.find(c => c.slug === 'l-g-tools');
                
                if (!lgTools) {
                    log('L&G Tools customer not found!', 'error');
                    return;
                }
                
                log('Found L&G Tools customer');
                
                // Create comprehensive audit data
                const auditData = window.customerAuditDataManager.createCustomerAuditData(lgTools);
                
                log('✅ Audit data created successfully!', 'success');
                log(`Overall Score: ${auditData.overallScore}`);
                log(`Critical Issues: ${auditData.issues.critical}`);
                log(`Desktop Score: ${auditData.performance.desktop.score}`);
                log(`Mobile Score: ${auditData.performance.mobile.score}`);
                log(`Competitors: ${auditData.competitors.length}`);
                
                // Update customer record with data reference
                lgTools.hasAuditData = true;
                lgTools.auditDataKey = 'l-g-tools';
                localStorage.setItem('website_audit_customers', JSON.stringify(customers));
                
                log('✅ Customer record updated', 'success');
                
            } catch (error) {
                log(`Error: ${error.message}`, 'error');
            }
        }
        
        function viewData() {
            const data = window.customerAuditDataManager.getCustomerAuditData('l-g-tools');
            if (data) {
                console.log('L&G Tools Audit Data:', data);
                log('Data loaded - check console for details', 'success');
            } else {
                log('No data found for L&G Tools', 'error');
            }
        }
        
        // Auto-initialize on load
        window.addEventListener('load', () => {
            log('System ready - click Initialize to create L&G Tools audit data');
        });
    </script>
</body>
</html>