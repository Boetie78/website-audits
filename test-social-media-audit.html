<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social Media Audit Test - Promac Paints</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-50 p-8">
    <div class="max-w-6xl mx-auto">
        <h1 class="text-3xl font-bold mb-6 text-center">Social Media Audit Section Test</h1>
        
        <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
            <div class="flex items-center gap-3 mb-6">
                <button onclick="testSocialMediaChart()" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                    Test Chart Rendering
                </button>
                <button onclick="testCSVExport()" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
                    Test CSV Export
                </button>
                <button onclick="validateImplementation()" class="bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700">
                    Validate Implementation
                </button>
            </div>
            
            <div id="testResults" class="p-4 bg-gray-100 rounded-lg mb-6">
                <h3 class="font-semibold mb-2">Test Results:</h3>
                <div id="results"></div>
            </div>
        </div>
        
        <!-- Social Media Overview Cards (copied from main implementation) -->
        <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
            <h2 class="text-xl font-bold mb-4">Social Media Overview</h2>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="bg-gradient-to-r from-red-50 to-red-100 p-6 rounded-lg border-l-4 border-red-500">
                    <div class="text-2xl font-bold text-red-700 mb-2">47</div>
                    <div class="text-red-800 font-medium text-sm">YouTube Subscribers</div>
                    <div class="text-xs text-red-600 mt-1">Last post: 2 years ago</div>
                </div>
                <div class="bg-gradient-to-r from-orange-50 to-orange-100 p-6 rounded-lg border-l-4 border-orange-500">
                    <div class="text-2xl font-bold text-orange-700 mb-2">14</div>
                    <div class="text-orange-800 font-medium text-sm">YouTube Videos</div>
                    <div class="text-xs text-orange-600 mt-1">2.7 avg views/video</div>
                </div>
                <div class="bg-gradient-to-r from-yellow-50 to-yellow-100 p-6 rounded-lg border-l-4 border-yellow-500">
                    <div class="text-2xl font-bold text-yellow-700 mb-2">LOW</div>
                    <div class="text-yellow-800 font-medium text-sm">Activity Level</div>
                    <div class="text-xs text-yellow-600 mt-1">Inactive for 24+ months</div>
                </div>
                <div class="bg-gradient-to-r from-purple-50 to-purple-100 p-6 rounded-lg border-l-4 border-purple-500">
                    <div class="text-2xl font-bold text-purple-700 mb-2">0%</div>
                    <div class="text-purple-800 font-medium text-sm">Engagement Rate</div>
                    <div class="text-xs text-purple-600 mt-1">No recent activity</div>
                </div>
            </div>
        </div>
        
        <!-- Chart Test Section -->
        <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
            <h2 class="text-xl font-bold mb-4">YouTube Subscriber Comparison Chart Test</h2>
            <div class="bg-gray-50 p-6 rounded-lg">
                <canvas id="testSocialMediaChart" width="400" height="200"></canvas>
            </div>
        </div>
        
        <!-- Platform-Specific Analysis Table Test -->
        <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
            <h2 class="text-xl font-bold mb-4">Platform Analysis Test</h2>
            <div class="overflow-x-auto">
                <table class="w-full bg-white border border-gray-200 rounded-lg overflow-hidden">
                    <thead>
                        <tr class="bg-gray-50">
                            <th class="px-4 py-3 text-left text-sm font-medium text-gray-900 border-b">Platform</th>
                            <th class="px-4 py-3 text-center text-sm font-medium text-gray-900 border-b">Promac</th>
                            <th class="px-4 py-3 text-center text-sm font-medium text-gray-900 border-b">Gap Analysis</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-200">
                        <tr>
                            <td class="px-4 py-3 font-medium text-gray-900">YouTube</td>
                            <td class="px-4 py-3 text-center text-red-600">
                                <div class="text-sm">47 subscribers</div>
                                <div class="text-xs text-gray-500">Inactive 24mo</div>
                            </td>
                            <td class="px-4 py-3 text-center">
                                <span class="bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs">Critical Gap</span>
                            </td>
                        </tr>
                        <tr>
                            <td class="px-4 py-3 font-medium text-gray-900">LinkedIn</td>
                            <td class="px-4 py-3 text-center text-gray-400">
                                <div class="text-sm">Unknown</div>
                                <div class="text-xs text-gray-500">Need audit</div>
                            </td>
                            <td class="px-4 py-3 text-center">
                                <span class="bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs">High Priority</span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        function addResult(test, status, message) {
            const results = document.getElementById('results');
            const result = document.createElement('div');
            result.className = `p-2 mb-2 rounded ${status === 'PASS' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`;
            result.innerHTML = `<strong>${test}:</strong> ${status} - ${message}`;
            results.appendChild(result);
        }
        
        function testSocialMediaChart() {
            try {
                const ctx = document.getElementById('testSocialMediaChart');
                if (!ctx) {
                    addResult('Chart Canvas', 'FAIL', 'Canvas element not found');
                    return;
                }
                
                if (!window.Chart) {
                    addResult('Chart.js Library', 'FAIL', 'Chart.js library not loaded');
                    return;
                }
                
                new Chart(ctx.getContext('2d'), {
                    type: 'bar',
                    data: {
                        labels: ['Promac Paints', 'Dulux SA', 'Plascon', 'Duram'],
                        datasets: [{
                            label: 'YouTube Subscribers',
                            data: [47, 2500, 1800, 1200],
                            backgroundColor: [
                                '#EF4444', // red-500 (Promac - critical state)
                                '#10B981', // green-500 (Dulux - market leader)
                                '#8B5CF6', // purple-500 (Plascon)
                                '#F59E0B'  // amber-500 (Duram)
                            ],
                            borderColor: [
                                '#DC2626', // red-600
                                '#059669', // green-600
                                '#7C3AED', // purple-600
                                '#D97706'  // amber-600
                            ],
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        const value = context.parsed.y;
                                        if (context.dataIndex === 0) {
                                            return 'Promac: ' + value + ' subscribers (CRITICAL GAP)';
                                        } else {
                                            return context.label + ': ~' + value + ' subscribers (estimated)';
                                        }
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return value.toLocaleString();
                                    }
                                }
                            },
                            x: {
                                ticks: {
                                    maxRotation: 45,
                                    minRotation: 0
                                }
                            }
                        }
                    }
                });
                
                addResult('Chart Rendering', 'PASS', 'Social Media chart rendered successfully');
                
            } catch (error) {
                addResult('Chart Rendering', 'FAIL', `Error: ${error.message}`);
                console.error('Chart error:', error);
            }
        }
        
        function testCSVExport() {
            try {
                // Test CSV generation logic
                let csvContent = '"Platform","Promac Status","Promac Metrics","Dulux Status","Plascon Status","Duram Status","Gap Analysis","Priority","Recommendation","Expected ROI"\\n';
                
                const socialMediaData = [
                    ['YouTube', '47 subscribers', 'Inactive 24 months, 14 videos', 'Active Channel', 'Active Channel', 'Active Channel', 'Critical Gap', 'Priority #1', 'Reactivate with weekly tutorials', '500+ subscribers in 6mo'],
                    ['Facebook', 'Unknown Status', 'Need audit', 'Brand presence', 'Brand presence', 'Brand presence', 'Audit Required', 'High', 'Complete audit and establish presence', 'Local market engagement'],
                    ['Instagram', 'Unknown Status', 'Need audit', 'Visual content active', 'Visual content active', 'Visual content active', 'Audit Required', 'High', 'Launch business account', 'Visual showcase platform'],
                    ['LinkedIn', 'Unknown Status', 'Need audit', 'Corporate B2B focus', 'Corporate B2B focus', 'Corporate B2B focus', 'High Priority', 'Priority #2', 'Create company page, thought leadership', '300+ followers in 6mo']
                ];
                
                socialMediaData.forEach(row => {
                    const escapedRow = row.map(cell => '"' + cell.toString().replace(/"/g, '""') + '"');
                    csvContent += escapedRow.join(',') + '\\n';
                });
                
                // Test blob creation
                const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
                
                if (blob.size > 0) {
                    addResult('CSV Generation', 'PASS', `CSV content generated successfully (${blob.size} bytes)`);
                    
                    // Test download functionality (won't actually download in test)
                    const url = URL.createObjectURL(blob);
                    URL.revokeObjectURL(url);
                    addResult('CSV Download', 'PASS', 'CSV download functionality working');
                } else {
                    addResult('CSV Generation', 'FAIL', 'Empty CSV content generated');
                }
                
            } catch (error) {
                addResult('CSV Export', 'FAIL', `Error: ${error.message}`);
                console.error('CSV export error:', error);
            }
        }
        
        function validateImplementation() {
            try {
                // Test DOM elements
                const elements = [
                    'testSocialMediaChart'
                ];
                
                let allElementsFound = true;
                elements.forEach(elementId => {
                    const element = document.getElementById(elementId);
                    if (!element) {
                        addResult('DOM Validation', 'FAIL', `Element ${elementId} not found`);
                        allElementsFound = false;
                    }
                });
                
                if (allElementsFound) {
                    addResult('DOM Validation', 'PASS', 'All required DOM elements found');
                }
                
                // Test Tailwind CSS classes
                const testElement = document.querySelector('.bg-gradient-to-r');
                if (testElement) {
                    addResult('Tailwind CSS', 'PASS', 'Tailwind CSS classes working');
                } else {
                    addResult('Tailwind CSS', 'FAIL', 'Tailwind CSS not applying correctly');
                }
                
                // Test Chart.js library
                if (window.Chart) {
                    addResult('Chart.js Library', 'PASS', 'Chart.js library loaded successfully');
                } else {
                    addResult('Chart.js Library', 'FAIL', 'Chart.js library not loaded');
                }
                
                addResult('Implementation Validation', 'PASS', 'Social Media Audit implementation validated successfully');
                
            } catch (error) {
                addResult('Implementation Validation', 'FAIL', `Error: ${error.message}`);
                console.error('Validation error:', error);
            }
        }
        
        // Auto-run basic validation on page load
        window.addEventListener('load', function() {
            setTimeout(() => {
                validateImplementation();
            }, 1000);
        });
    </script>
</body>
</html>